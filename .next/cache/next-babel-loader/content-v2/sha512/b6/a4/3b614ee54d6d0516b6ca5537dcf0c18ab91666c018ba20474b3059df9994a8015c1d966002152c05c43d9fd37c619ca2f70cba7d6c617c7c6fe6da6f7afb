{"ast":null,"code":"import cors from \"../cors\";\nimport { FactoryLogic } from \"e-commercee/ECommerce/dist/logic/FactoryLogic\";\nimport { Category } from \"e-commercee/ECommerce/dist/shared/entity/Category\";\nexport default async function (req, res) {\n  if (req.method === \"GET\") {\n    try {\n      await cors(req, res);\n      const {\n        pname\n      } = req.query;\n      const getcategory = await FactoryLogic.getLCategory().getCategory(pname);\n      return res.send(getcategory);\n    } catch (error) {\n      return res.status(500).send(\"Could not search category \" + error.message);\n    }\n  }\n\n  if (req.method === \"POST\") {\n    await cors(req, res);\n\n    try {\n      const data = req.body;\n      const dtprogram = new Category(data.name, data.description);\n      await FactoryLogic.getLCategory().addCategory(dtprogram);\n      return res.status(200).send(\"Success\");\n    } catch (error) {\n      return res.status(500).send(\"Could not add category: \" + error.message);\n    }\n  }\n\n  if (req.method === \"PUT\") {\n    await cors(req, res);\n\n    try {\n      const data = req.body;\n      const dtcat = new Category(data.name, data.description);\n      await FactoryLogic.getLCategory().updateCategory(dtcat);\n      return res.status(200).send(\"Success\");\n    } catch (error) {\n      return res.status(500).send(\"Could not update category: \" + error.message);\n    }\n  }\n}","map":{"version":3,"sources":["D:/TODO (Desarrollo Software)/Tutoriales y demas cosas/APINext/APINextEcommercee/pages/api/category/category.js"],"names":["cors","FactoryLogic","Category","req","res","method","pname","query","getcategory","getLCategory","getCategory","send","error","status","message","data","body","dtprogram","name","description","addCategory","dtcat","updateCategory"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,SAAjB;AACA,SAASC,YAAT,QAA6B,+CAA7B;AACA,SAASC,QAAT,QAAyB,mDAAzB;AACA,eAAe,gBAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AACrC,MAAGD,GAAG,CAACE,MAAJ,KAAa,KAAhB,EACA;AACQ,QACA;AACH,YAAML,IAAI,CAACG,GAAD,EAAMC,GAAN,CAAV;AACA,YAAM;AAACE,QAAAA;AAAD,UAAUH,GAAG,CAACI,KAApB;AACC,YAAMC,WAAW,GAAC,MAAMP,YAAY,CAACQ,YAAb,GAA4BC,WAA5B,CAAwCJ,KAAxC,CAAxB;AACA,aAAOF,GAAG,CAACO,IAAJ,CAASH,WAAT,CAAP;AACD,KANG,CAOJ,OAAOI,KAAP,EAAc;AACZ,aAAOR,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB,+BAA6BC,KAAK,CAACE,OAAxD,CAAP;AACD;AACH;;AAEA,MAAGX,GAAG,CAACE,MAAJ,KAAa,MAAhB,EACA;AACE,UAAML,IAAI,CAACG,GAAD,EAAMC,GAAN,CAAV;;AACA,QACA;AACA,YAAMW,IAAI,GAAGZ,GAAG,CAACa,IAAjB;AACA,YAAMC,SAAS,GAAC,IAAIf,QAAJ,CAAaa,IAAI,CAACG,IAAlB,EAAuBH,IAAI,CAACI,WAA5B,CAAhB;AACA,YAAMlB,YAAY,CAACQ,YAAb,GAA4BW,WAA5B,CAAwCH,SAAxC,CAAN;AACA,aAAOb,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB,SAArB,CAAP;AACC,KAND,CAOA,OAAOC,KAAP,EAAc;AACZ,aAAOR,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB,6BAA2BC,KAAK,CAACE,OAAtD,CAAP;AACD;AACF;;AACD,MAAGX,GAAG,CAACE,MAAJ,KAAa,KAAhB,EACA;AACE,UAAML,IAAI,CAACG,GAAD,EAAMC,GAAN,CAAV;;AACA,QACA;AACA,YAAMW,IAAI,GAAGZ,GAAG,CAACa,IAAjB;AACA,YAAMK,KAAK,GAAC,IAAInB,QAAJ,CAAaa,IAAI,CAACG,IAAlB,EAAuBH,IAAI,CAACI,WAA5B,CAAZ;AACA,YAAMlB,YAAY,CAACQ,YAAb,GAA4Ba,cAA5B,CAA2CD,KAA3C,CAAN;AACA,aAAOjB,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB,SAArB,CAAP;AACC,KAND,CAOA,OAAOC,KAAP,EAAc;AACZ,aAAOR,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBF,IAAhB,CAAqB,gCAA8BC,KAAK,CAACE,OAAzD,CAAP;AACD;AACF;AACN","sourcesContent":["import cors from \"../cors\";\r\nimport { FactoryLogic } from \"e-commercee/ECommerce/dist/logic/FactoryLogic\";\r\nimport { Category } from \"e-commercee/ECommerce/dist/shared/entity/Category\";\r\nexport default async function (req, res) {\r\n    if(req.method===\"GET\")\r\n    {\r\n            try\r\n            {\r\n         await cors(req, res)\r\n         const {pname} = req.query;\r\n          const getcategory=await FactoryLogic.getLCategory().getCategory(pname);\r\n          return res.send(getcategory);\r\n        }\r\n        catch (error) {\r\n          return res.status(500).send(\"Could not search category \"+error.message);\r\n        }\r\n     }\r\n     \r\n      if(req.method===\"POST\")\r\n      {\r\n        await cors(req, res)\r\n        try\r\n        {\r\n        const data = req.body;\r\n        const dtprogram=new Category(data.name,data.description);\r\n        await FactoryLogic.getLCategory().addCategory(dtprogram);\r\n        return res.status(200).send(\"Success\");\r\n        }\r\n        catch (error) {\r\n          return res.status(500).send(\"Could not add category: \"+error.message);\r\n        }\r\n      }\r\n      if(req.method===\"PUT\")\r\n      {\r\n        await cors(req, res)\r\n        try\r\n        {\r\n        const data = req.body;\r\n        const dtcat=new Category(data.name,data.description);\r\n        await FactoryLogic.getLCategory().updateCategory(dtcat);\r\n        return res.status(200).send(\"Success\");\r\n        }\r\n        catch (error) {\r\n          return res.status(500).send(\"Could not update category: \"+error.message);\r\n        }\r\n      }\r\n}"]},"metadata":{},"sourceType":"module"}